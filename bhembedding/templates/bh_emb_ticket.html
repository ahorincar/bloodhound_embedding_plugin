<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:i18n="http://genshi.edgewall.org/i18n">
      <link rel="stylesheet" href="${href.chrome('dashboard/css/bootstrap.css')}" type="text/css" />
      <link rel="stylesheet" href="${href.chrome('dashboard/css/bootstrap-responsive.css')}" type="text/css" />
      <link rel="stylesheet" href="${href.chrome('embedding/embedding.css')}" type="text/css" />

  <head>
    <title>Ticket ${ticket.id}</title>
  </head>

  <body>
    <div>
      <h2>${ticket.summary}</h2>
      <h4><a target="_blank" href="${href.ticket(ticket.id)}">Ticket #${ticket.id}</a></h4>
        <h5>Assigned to
          <a target="_blank" href="${href.query(owner=ticket.owner, status='!closed'
                                    , order='priority')}">${ticket.owner}</a>
           , last modified
           <a target="_blank" href="${href('timeline', {'from': ticket.changetime})}">
              ${format_datetime(ticket.changetime)}</a>
        </h5>

      <table class="table table-condensed ticket-properties">
        <tr>
          <th class="properties">Reporter</th>
          <td><a target="_blank" href="${href.query(reporter=ticket.reporter, status='!closed'
                                        , order='priority')}">${ticket.reporter}</a></td>
        </tr>
        <tr>
          <th class="properties">Keywords</th>
          <py:choose>
            <td py:when="ticket.keywords"><a target="_blank" href="${href.query(keywords=ticket.keywords
                                     , status='!closed', order='priority')}">${ticket.keywords}</a></td>
            <td py:otherwise="">none</td>
          </py:choose>
        </tr>
        <tr>
          <th class="properties">Type</th>
          <td><a target="_blank" href="${href.query(type=ticket.type, status='!closed'
                                        , order='priority')}">${ticket.type}</a></td>
        </tr>
        <tr>
          <th class="properties">Status</th>
          <td><a target="_blank" href="${href.query(status=ticket.status
                                        , order='priority')}">${ticket.status}</a></td>
        </tr>
        <tr>
          <th class="properties">Priority</th>
          <td><a target="_blank" href="${href.query(priority=ticket.priority, status='!closed'
                                        , order='priority')}">${ticket.priority}</a></td>
        </tr>
        <tr>
          <th class="properties">Product</th>
          <td><a target="_blank" href="${href.query(product=ticket.product, status='!closed'
                                        , order='priority')}">${ticket.product}</a></td>
        </tr>
        <tr>
          <th class="properties">Milestone</th>
          <py:choose>
            <td py:when="ticket.milestone">
              <a target="_blank" href="${href.query(milestone=ticket.milestone, status='!closed'
                                        , order='priority')}">${ticket.milestone}</a></td>
            <td py:otherwise="">none</td>
          </py:choose>
        </tr>
        <tr>
          <th class="properties">Component</th>
          <py:choose>
            <td py:when="ticket.component">
              <a target="_blank" href="${href.query(component=ticket.component, status='!closed'
                                        , order='priority')}">${ticket.component}</a></td>
            <td py:otherwise="">none</td>
          </py:choose>
        </tr>
        <tr>
          <th class="properties">Version</th>
          <py:choose>
            <td py:when="ticket.version">
              <a target="_blank" href="${href.query(version=ticket.version, status='!closed'
                                        , order='priority')}">${ticket.version}</a></td>
            <td py:otherwise="">none</td>
          </py:choose>
        </tr>
        <tr>
          <th class="properties">Severity</th>
          <py:choose>
            <td py:when="ticket.severity">
              <a target="_blank" href="${href.query(severity=ticket.severity, status='!closed'
                                       , order='priority')}">${ticket.severity}</a></td>
            <td py:otherwise="">none</td>
          </py:choose>
        </tr>
        <tr>
          <th class="properties">Number of comments</th>
          <py:choose>
            <td py:when="comm_num">
              <a target="_blank" href="${href.ticket(ticket.id)}">${comm_num}</a></td>
            <td py:otherwise="">0</td>
          </py:choose>
        </tr>
        <tr>
          <th class="properties">Number of attachments</th>
          <py:choose>
            <td py:when="attachment_num">
              <a target="_blank" href="${href.attachment('ticket', ticket.id)}">${attachment_num}</a></td>
            <td py:otherwise="">0</td>
          </py:choose>
        </tr>
      </table>

    </div>
  </body>
</html>
